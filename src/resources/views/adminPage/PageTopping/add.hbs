<style>
  .input_thongso_products{
    border-radius: 8px;
    outline: none;
    border: 1px solid;
    padding: 4px 8px;
  }
</style>

<div class="container pd-admin">
   <div class="pd-bd-admin box-shadow-1 text-white bg-child-admin">

    <h1>Thêm Topping</h1>
<form method="POST" action="storeTopping?_method=PUT" >
  
  <div class="mb-3">
    <label  class="form-label">Tên topping</label>
     <input name="nameTopping" type="text" class="form-control" placeholder="VD: Trân châu " >
  </div>
  <div class="mb-3">
    <label  class="form-label">Giá</label>
    <input name="PriceTopping" type="text" class="form-control" placeholder="VD: 5000 (đơn vị là VND)"  >
  </div>
  <div class="mb-3">
    <label  class="form-label">Đơn vị tính</label>
    <input name="unitTopping" type="text" class="form-control" placeholder="VD: phần "  >
  </div>
    
  <button type="submit" class="btn btn-primary" id="btnSubmit" >Submit</button>
</form>
</div>
  </div>
<script>
  document.addEventListener('DOMContentLoaded',function(){
      var elemt_select_category = $('#slc_choose_category');
      var slc_select_Itemcategory = $('#slc_choose_Itemcategory');
      var notifycation_validation_slc_Category =$('#notifycation_validation_slc_Category');
      var appenHTMLSpecification_products = $('#appenHTMLSpecification_products');
      var btnThemLine = $('#btn_ThemLine_Specification');
      var btn_ThemMau = $('#btn_ThemMau');
      var appendInputColor = $('#appendInputColor');
      var countElemet = 0;
      var countMauElement =0;
      var btnSubmit = $('#btnSubmit');
      elemt_select_category.change(function(){
        loadDuLieu();
      })
    
    btnThemLine.on('click',function(){
           var elementChildNodeAppendLine =appenHTMLSpecification_products.children().length;
           if(elementChildNodeAppendLine>=3){
             alert("Chỉ được thêm 3 size")
           }else{
               countElemet++;
        
          var title = 'listSize[]';
          var detail = 'listPriceExtra[]'
          appenHTMLSpecification_products.append(renderItemSpecifications(countElemet,title,detail));
          
          var btn_of_line = $(`.btn-remove-specification-line-${countElemet}`); //btn đỏ của từng dòng
          var parent_btn_of_line = $(`.number-element-${countElemet}`);  //div cha của btn đỏ
          var elementChildNodeAppendLine =appenHTMLSpecification_products.children().length; //đếm length các phẩn tử con của id "appendLineAddCategory"
          toggleDisabledWithLength(elementChildNodeAppendLine,btnSubmit);  //Vô hiệu hoá btn Lưu khi ấn nút thêm line xanh lá
          btn_of_line.on('click',function(){
              parent_btn_of_line.remove();
              //Vô hiệu hoá btn Lưu khi ấn nút xoá line đỏ
              var elementChildNodeAppendLine =appenHTMLSpecification_products.children().length;
             
              toggleDisabledWithLength(elementChildNodeAppendLine,btnSubmit);
             
              
              
          })
           }
        
          
        })
  btn_ThemMau.on('click',function(){
    countMauElement++;
    appendInputColor.append(renderMoreColor(countMauElement));
    var btn_remove_color =$(`.btn-remove-color-${countMauElement}`);
      var parent_btn_remove_color = $(`.color-file-${countMauElement}`);
    btn_remove_color.on('click',function(){
        parent_btn_remove_color.remove();
    })
  
  
  })
    function loadDuLieu(){
    if(elemt_select_category.val() != "")
          {
               
              var id =elemt_select_category.val();
              const item = getListCategory(id);
              item.then(response=>{  
               var Item = response.data.Item;
              var htmlSlcItemCategory = renderOptionSelect(Item);
              slc_select_Itemcategory.html(htmlSlcItemCategory);
               slc_select_Itemcategory.removeAttr('disabled','disabled');
               notifycation_validation_slc_Category.html(``);
          })
          }
    else{
       notifycation_validation_slc_Category.html(`<div class="text-danger">Vui lòng chọn category</div>`);
       slc_select_Itemcategory.html("");
       slc_select_Itemcategory.attr('disabled','disabled');

    }
      
  }

   async function getListCategory(id){
      try{
        const reponse = await axios.get(`getItemCategory/${id}`)
        return reponse
      }  
      catch (error){
        console.log(error);
      }
    }
  })
 
</script>