

<div class="container pd-admin ">
  <div class="pd-bd-admin box-shadow-1 text-white bg-child-admin">
    <a href="/me/listOrder" class="a-none btn btn-secondary">
      Quay lại
    </a>
    <h1>Chi tiết đơn hàng</h1>
<div>
     
    {{!-- <div class="d-flex my-2 align-items-center justify-content-between">
      <a href="category/bin" class="a-none btn btn-dark-custom">
          <i class="fas fa-trash"></i> Thùng rác 
          {{#if numTrash}}
          ({{numTrash}})
          {{else}}
          (0) 
          {{/if}}
      </a>
      <div class="d-flex gap-3"> 
      <span class="d-flex align-items-center gap-2">
      <input class="form-check-input" type="checkbox" value="" id="chkCheckAll"> <span>SelectAll</span> 
      </span>
      <button type="button" class="btn btn-danger" id="btn_Remove_Many"  data-bs-toggle="modal" data-bs-target="#ModalDeleteMany"disabled>
          Xoá các mục được chọn
      </button>
      </div>
    </div> --}}
    
  <form method="POST" name="removeManyCategory" action="removeManyCategory?_method=DELETE">
    {{#with data}}
    <div class="d-flex justify-content-between">
        <div>
          <div>
         Mã đơn hàng: {{idOrder}}
          </div>
          <div>
           Trạng thái: {{statusOrder}}
          </div>
           <div>
            Ngày đặt: {{createdAt}}
          </div>
        </div>
        <div>
           <div>
         Khách Hàng: {{hotenOrder}}
          </div>
          <div>
         SĐT: {{sdtOrder}}
          </div>
         <div>
          Địa chỉ: {{addressOrder}}
          </div>
        </div>
    </div>
    {{/with}}
  <div id='appendListCategory'>
    <h5>Giỏ hàng</h5>
    {{#if cartProduct}}
        <table class="table table-success table-striped my-3 align-middle text-center table-text-form">
           <tr>
              <th class="">STT</th>
              <th class="">tên sản phẩm</th>
                <th class="">Hình ảnh</th> 
                <th class="">số lượng</th> 
                <th class="">Size</th> 
                <th class="">Topping</th> 
                <th>Giá</th>
            </tr>
      {{#each cartProduct}}

            <tr>
              <td class="">{{inc @index}}</td>
              <td class="">{{this.cartProduct.nameProduct}}</td>
              {{!-- <td class="">{{hinh}}</td> --}}
              <td class=""><img src="http://localhost:3000/uploads/{{this.cartProduct.imageRepresent}}" alt=""></td>
              <td class="">{{this.quanityProduct}}</td>
              <td>S</td>
              <td>Phô mai</td>
              <td >{{this.priceToltal}}</td>

            </tr>


      {{/each}}
      </table>
      {{else}}
           {{>empty}}
    {{/if}}

      {{#with data}}
      <div class="d-flex justify-content-between">
        <div>
       Khuyễn mãi: 
        </div> 
        <div>
          {{this.priceSale}}
        </div>
      
      </div>
    <div class="d-flex justify-content-between">
        <div>
     Thành Tiền: 
        </div>
        <div>
          {{this.priceTotal}}
        </div>
      </div>
      {{/with}}
  </div>
 
</div>

<form name="removeItemCategory" method="POST" ></form>
</div>
</div>

<div class="modal fade" id="ModalDelete" tabindex="-1" aria-labelledby="TitleModalDelete" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="TitleModalDelete">Thông báo</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Bạn muốn từ chối đơn hàng này ?
       
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Huỷ bỏ</button>
        <button type="button" class="btn btn-danger del-category" >Đồng ý </button>
      </div>
    </div>
  </div>
</div>


<script>
  document.addEventListener('DOMContentLoaded',function(){
      
      
      // Khai báo biến
      //Button
      var btnThemLine = $('#btn_ThemLine_Category')
       var btn_Remove_Many = $('#btn_Remove_Many')
      var btnSubmit =$('#btn_submit_Category');
      //element
      var element_line_category = $('#appendLineAddCategory');
       //checkbox
       var CategoryItemcheckbox = $('input[name="select_Category[]"]');
       var chkCheckAll = $('#chkCheckAll');
      var checkboxName = 'select_Category[]';
      //Modal
      var ModalDelete = document.getElementById('ModalDelete');
      var ModalDeleteMany = document.getElementById('ModalDeleteMany');
      //forms
      var formRemoveItemCategory = document.forms['removeItemCategory'];
      var removeManyCategory = document.forms['removeManyCategory'];
      var storeCategory = document.forms['storeCategory'];
      var btn_edit_category = $('.btn_edit_category');
      var frmCategoryEdit = document.forms['frmCategoryEdit'];
      //Bien cuc bo
      var countElemet = 0;
      var name ='nameCategory';
      var icon ='iconCategory';

        var collectionStatusOrder = document.querySelectorAll('.statusOrder');
        collectionStatusOrder.forEach(element=>{
            if(element.innerHTML ==='pending'){
                element.style.color = 'yellow';
            }
            else if(element.innerHTML ==='active'){
                 element.style.color = 'green';
            }
            else{
                 element.style.color = 'red';
            }
        })
    
       
          //Show Modal Delete
          ModalDelete.addEventListener('show.bs.modal', function (event) {
            // Button that triggered the modal  
             
             var button = event.relatedTarget;
              var idDonHang = button.getAttribute('data-id')
            // Extract info from data-bs-* attributes
              var delCategory=document.querySelector('.del-category');
         
              delCategory.onclick =function(){
                  activeDonHang(idDonHang,'cancel');
              }
            })
         
         

         
            
            
    
})
  function activeDonHang(id,status){
           
               axios.post('/me/activeDonHang', {
                   id:id,
                   status:status,
                })
                .then(function (response) {
                   if(response.data == 'success'){
                       location.reload();
                   }
                   else{
                       alert('vui lòng thử lại');
                   }
                })
                .catch(function (error) {
                    console.log(error);
                });
                
             
           }

     
</script>

